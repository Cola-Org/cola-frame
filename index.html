<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<title>Cola-Frame by Cola-Org</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
	<link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
</head>
<body>
<section class="page-header">
	<h1 class="project-name">Cola-Frame</h1>

	<h2 class="project-tagline">cola-ui 桌面应用前端基础框架</h2>
	<a href="https://github.com/Cola-Org/cola-frame" class="btn">View on GitHub</a>
	<a href="https://github.com/Cola-Org/cola-frame/zipball/master" class="btn">Download .zip</a>
	<a href="https://github.com/Cola-Org/cola-frame/tarball/master" class="btn">Download .tar.gz</a>
</section>

<section class="main-content"><h1 id="cola-frame-">Cola Frame的功能特点</h1>

	<p>Cola Frame 桌面应用前端基础框架。包含了主框架常用的界面以及功能。
		如登录登出页、500、404界面，消息系统和内部页面控制框架Title和Favicon，Ajax 请求状态管理等。</p>

	<h2>内部标签管理</h2>

	<p>Cola Frame默认使用内部标签Tab模式打开菜单页面。</p>

	<h2>多样化菜单</h2>

	<p>Cola Frame 总结了大部分系统的设计模式，抽象出了三套常用的主框架界面排版模式。</p>
	<h4 id="1-">1. 互联网管理平台模式</h4>

	<p>此模式为目前互联网管理平台较为流行的管理系统菜单结构。适合多层菜单结构使用。</p>

	<p><img src="./resources/images/frame/main.jpg" alt="互联网管理平台模式"></p>
	<h4 id="2-">2. 电商菜单模式</h4>

	<p>此菜单模式为最为快捷和定位的菜单，用户交互较好，适合三层菜单结构使用。</p>

	<p><img src="./resources/images/frame/main-shop.jpg" alt="电商菜单模式"></p>
	<h4 id="3-">3. 顶部菜单模式</h4>

	<p>此菜单模式也是比较传统的设计，主菜单在顶层排列模式，适合频道模式分组的多层菜单结构使用，但频道不宜过多。</p>

	<p><img src="./resources/images/frame/main-top.jpg" alt="顶部菜单模式"></p>

	<h2>消息系统</h2>

	<p>Cola Frame 内置消息系统，已长轮询模式获取系统消息。
		内部业务界面可通过Api</p>
	<pre><code> App.refreshMessage();</code></pre>
	<p>进行刷新主框架消息。</p>

	<h2>框架内部登录</h2>

	<p>比较常见的框里系统的登录都已外部登录也登录为主。这种模式在用户体验和使用上极为不便。
		如业务操作人员填写一分字段较多的表单时，如果当点击提交时后台发现session timeout。在此种场景下众多平台的解决方案是强redirect 或者弹出外部登录界面，容易出现操作人员喜辛苦填写的表单丢失等情况。</p>

	<p>考虑到以上场景Cola-Frame内置了框架内部登录系统。
		服务端只需要返回Status 401 Cola Frame 自动弹出内置登录框。</p>

	<h1 >基本参数设定</h1>

	<p>在开始进行实际的开发之前我们首先需要确定一些基本的参数设置。Cola Shell项目的配置参数通常都被放在<code>/public/common/common.js</code>中，
		在这个文件中我们可以找到这样一段内容。各种默认参数值应该在这里进行配置。</p>
<pre><code>/* 系统默认值 */
	var properties = {
		mainView: &quot;./frame/main&quot;,
		loginPath: &quot;./login&quot;,
		longPollingTimeout: 0,
		longPollingInterval: 2000,
		&quot;service.messagePull&quot;: &quot;./service/message/pull&quot;,
		&quot;service.login&quot;: &quot;./service/account/login&quot;,
		&quot;service.logout&quot;: &quot;./service/account/logout&quot;,
		&quot;service.menus&quot;: &quot;./service/menus&quot;,
		&quot;service.user.detail&quot;: &quot;./service/user/detail&quot;,
		&quot;message.action&quot;: {
			path: &quot;http://cola-ui.com&quot;,
			type: &quot;subWindow&quot;,
			label: &quot;我的消息&quot;,
			closeable: true
		},
		&quot;task.action&quot;: {
			path: &quot;http://cola-ui.com&quot;,
			type: &quot;subWindow&quot;,
			label: &quot;我的任务&quot;,
			closeable: true
		},
		&quot;app.logo.path&quot;: &quot;./resources/images/logo.png&quot;,
		&quot;app.name&quot;: &quot;Cola-UI Client Framework&quot;,
		title: &quot;Cola-Frame&quot;
		};
</code></pre>
	<p>这里支持的参数目前有以下这些：</p>
	<ul>
		<li>mainView - 系统主框架界面地址</li>
		<li>loginPath - 登录界面路径</li>
		<li>longPollingTimeout - 消息长轮询请求超时时间</li>
		<li>longPollingInterval - 框架长轮询周期</li>
		<li>service.messagePull - 消息接口</li>
		<li>service.login - 登录接口</li>
		<li>service.logout - 登出接口</li>
		<li>service.menus - 系统菜单接口</li>
		<li>service.user.detail - 获得当前用户详细信息接口</li>
		<li>message.action - 单击右上角消息按钮后的响应配置</li>
		<li>task.action - 单击右上角任务按钮后的响应配置</li>
		<li>app.logo.path - 系统Logo图片地址</li>
		<li>app.name - 系统名称</li>
		<li>title - 系统Title 浏览器标签标题</li>
	</ul>
	<h1 id="app-">App对象</h1>
	<p>Cola Frame内置一个App对象，通过该对象可以完成一些跟App相关的操作。App中包含的方法有以下一些...</p>
	<h3 id="prop-key-value-">prop(key, value)</h3>
	<p>基本参数设定，具体请参考 <a href="frame-setting">基本参数设定</a> 。</p>
	<h3 id="open-path-config-">open(path, config)</h3>
	<p>打开一个新的链接。
		但是当我们要打开一个应用内的链接时，如果使用window.open()是会导致整个页面刷新的，而利用App.open()是不会导致整体刷新的，即实现的效果是应用内部的标签Tab的新增或者切换。
		这里的path参数是要打开的目标地址
		这里的config参数是修饰参数，config是一个JSON对象，其中包含下列的子属性：</p>
	<ul>
		<li>type    -  可选配置，是描述目标路径的打开形式,如打开一个新的浏览器标签、打开框架内部标签。type=subWindow 或 &quot;&quot; 都在框架内部打开一个标签，其他都打开新的浏览器标签。</li>
		<li>closeable    -    可选配置，是描述当前打开的页面是否支持关闭，默认值为true （type=subWindow 模式时有效）</li>
		<li>icon    -    当subWindow模式打开时的标签图标class name。（type=subWindow 模式时有效）</li>
		<li>label    -    当subWindow模式打开时的标签name（type=subWindow 模式时有效）</li>
	</ul>
	<h3 id="close-path-">close(path)</h3>
	<p>关闭一个内部界面.
		参数path是必选参数，cola Frame 内部用path作为key进行管理Tab。</p>
	<h3 id="gologin-">goLogin()</h3>
	<p>显示登录页。</p>
	<p>此方法可以传入回调方法</p>
	<ul>
		<li>回调方法在登录成功之后被触发。</li>
	</ul>
	<h3 id="settitle-title-">setTitle(title)</h3>
	<p>设置浏览器标签的标题。</p>
	<h3 id="setfavicon-path-">setFavicon(path)</h3>
	<p>设置浏览器标签小图标。path参数为图标图片的地址</p>
	<h3 id="refreshmessage-">refreshMessage()</h3>
	<p>刷新框架消息。</p>
	<h4 id="-cola-frame-common-common-js-">在应用业务界面引入了Cola Frame 提供的/common/common.js的前提下都可调用。</h4>
	<h1 >后台服务接口</h1>
	<p>要使Cola Frame的App能够良好的工作，需要实现几个基本的后端服务接口，以便于前端界面得到一些关键的信息。
		这些接口都是Ajax形式发出，其URL符合Restful的规则，且Response都是JSON格式的。</p>
	<p>如果您是用Java开发后端接口的话，建议您使用Spring MVC来搭建整个Restful的服务架构，
		具体可以参考我们提供的 <a href="https://github.com/Cola-Org/cola-ui-spring-rest-example">https://github.com/Cola-Org/cola-ui-spring-rest-example</a> 示例。</p>
	<p>如果你使用其他方式来搭建后端接口的话，请注意为这些服务的Response设置正确的ContentType，即<code>Content-Type:application/json</code>。
		否则jQuery的默认处理逻辑并不会将Response的内容转换成JSON。</p>
	<h3 >获取应用菜单接口</h3>
	<p>用于获得获取登录状态、登录用户信息、系统可用版本等基本信息的接口。该接口会在App已启动时由客户端第一时间自动发起，以便于尽早确认App是否已登录等关键信息。</p>
	<ul>
		<li>URL:<code>./service/menus</code>。</li>
		<li>Method: GET</li>
	</ul>
	<p>如果不想使用这个路径的话可以在common.js中修改Cola Frame的<code>service.menus</code>参数。</p>
	<p>该接口的Response的结构是这样的...</p>
	<pre><code>[
		{
			icon: &quot;icon setting&quot;,
			label: &quot;内容设置&quot;,
			menus: [
				{
					icon: &quot;icon payment&quot;,
					label: &quot;导航设置&quot;,
					type: &quot;subWindow&quot;,
					closeable: true,
					path:&quot;/path&quot;
				},
				{
					icon: &quot;icon edit&quot;,
					label: &quot;分类管理&quot;,
					menus: [
						{
							icon: &quot;icon sidebar&quot;,
							label: &quot;用户列表&quot;,
							type: &quot;subWindow&quot;,
							closeable: true,
							path: &quot;/example/time-line&quot;
						}, {
							icon: &quot;icon sitemap&quot;,
							label: &quot;用户组&quot;,
							type: &quot;subWindow&quot;,
							closeable: true,
							path: &quot;/example/time-line&quot;
						}
					]
				},
				{
					icon: &quot;iconfont icon-zhucerenzheng&quot;,
					label: &quot;专题管理&quot;,
					type: &quot;subWindow&quot;,
					closeable: true,
					path:&quot;/path&quot;
				}
			]
			}
		]
	</code></pre>
	<h3 >登录</h3>
	<p>Cola Shell已经默认提供好了一套登录界面，如果不使用Cola Shell提供的登录界面，那么你可以直接跳过这一段内容。
		如果要使用这套界面你只需要在后台为它定义一个登录的服务接口就好了。</p>
	<ul>
		<li>URL:<code>/service/account/login</code>。</li>
		<li>Method: POST</li>
		<li>Form Data:<ul>
			<li>userName: 登录账户名</li>
			<li>password: 口令</li>
		</ul>
		</li>
	</ul>
	<p>如果你希望改变这个服务的路径可以在common.js中修改Cola Frame的<code>service.login</code>参数。</p>
	<p>该接口的Response的结构是这样的...</p>
	<pre><code>{
	type: true/false,    // 登录是否成功
	message: &quot;&quot;    // 如果登录失败则输出失败的原因
}</code></pre>
	<h3 >登出</h3>
	<p>Cola Shell已经默认提供好了一套登录界面，如果不使用Cola Shell提供的登录界面，那么你可以直接跳过这一段内容。
		如果要使用这套界面你只需要在后台为它定义一个登录的服务接口就好了。</p>
	<ul>
		<li>URL:<code>/service/account/logout</code>。</li>
		<li>Method: POST</li>
	</ul>
	<p>如果你希望改变这个服务的路径可以在common.js中修改Cola Frame的<code>service.logout</code>参数。</p>
	<p>该接口的Response的结构是这样的...</p>
<pre><code>{
	type: true/false,    // 登出是否成功
	message: &quot;&quot;    // 如果登录失败则输出失败的原因
}</code></pre><h3 >拉取消息</h3>
	<p>用于获得后台消息的接口。</p>
	<ul>
		<li>URL:<code>./service/message/pull</code>。</li>
		<li>Method: GET</li>
	</ul>
	<p>如果不想使用这个路径的话可以在common.js中修改Cola Frame的<code>service.messagePull</code>参数。</p>
	<p>该接口的Response的结构是这样的...</p>
<pre><code>[
	{
		type:&quot;message&quot;,
		content:12
	},
	{
		type:&quot;task&quot;,
		content:8
	}
]
</code></pre><h3 >获得用户详细信息</h3>
	<p>用于获得获取登录用户信息的接口。</p>
	<ul>
		<li>URL:<code>./service/user/detail</code>。</li>
		<li>Method: GET</li>
	</ul>
	<p>如果不想使用这个路径的话可以在common.js中修改Cola Frame的<code>service.menus</code>参数。</p>
	<p>该接口的Response的结构是这样的...</p>
	<pre><code>{
	id: &quot;u0001&quot;
	name: &quot;Alex Tong&quot;
	avatar: &quot;/resources/images/avatars/alex.png&quot;
}
	</code></pre>

	<footer class="site-footer">
	<span class="site-footer-owner"><a href="https://github.com/Cola-Org/cola-frame">Cola-Frame</a> is maintained by <a href="https://github.com/Cola-Org">Cola-Org</a>.</span>

	<span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
	</footer>

</section>


</body>
</html>
